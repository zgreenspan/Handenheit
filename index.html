<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handenheit</title>
    <link rel="stylesheet" href="styles.css?v=58">
</head>
<body>
    <div class="container">
        <header>
            <h1>Handenheit</h1>
            <p class="subtitle">AI-Powered Internal Database Search</p>
        </header>

        <div class="tabs">
            <div class="tab-highlight"></div>
            <button class="tab-btn active" data-tab="view">View Attendees</button>
            <button class="tab-btn" data-tab="collect">Collect Data</button>
            <button class="tab-btn" data-tab="import">Import/Export</button>
        </div>

        <!-- Data Collection Tab -->
        <div class="tab-content" id="collect">
            <div class="collection-panel">
                <h2>Add Attendee Profile</h2>
                <p class="instructions">
                    <strong>How to use:</strong><br>
                    1. Open the attendee's LinkedIn profile in a new tab<br>
                    2. Press F12 (or Cmd+Option+I on Mac) to open DevTools<br>
                    3. Go to the Console tab<br>
                    4. Paste the contents of <code>linkedin-extractor.js</code> and press Enter<br>
                    5. The data will be copied to your clipboard<br>
                    6. Return here and paste it in the text area below
                </p>

                <div class="form-group">
                    <label for="jsonInput">Paste LinkedIn Profile Data:</label>
                    <textarea id="jsonInput" placeholder='Paste the JSON data here...' rows="10"></textarea>
                </div>

                <div class="form-group">
                    <label for="schoolInput">School/University (from Airtable):</label>
                    <input type="text" id="schoolInput" placeholder="e.g., Stanford University">
                </div>

                <div class="form-group">
                    <label for="imageInput">Profile Image URL (optional):</label>
                    <input type="text" id="imageInput" placeholder="Paste LinkedIn profile image URL here">
                    <small style="color: #86868B; display: block; margin-top: 4px;">If the extractor didn't capture the image, you can paste the image URL manually</small>
                </div>

                <div class="form-actions">
                    <button id="addProfileBtn" class="btn btn-primary">Add Profile to Database</button>
                    <button id="clearFormBtn" class="btn btn-secondary">Clear Form</button>
                </div>

                <div id="formStatus" class="status-message"></div>

                <div class="stats">
                    <h3>Progress</h3>
                    <p>Total Profiles Collected: <strong id="totalCount">0</strong> / 700</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- View Attendees Tab -->
        <div class="tab-content active" id="view">
            <div class="view-panel">
                <h2>Attendee Directory</h2>

                <!-- AI Search -->
                <div class="ai-search-container">
                    <div class="ai-search-header">
                        <div class="ai-icon">‚ú®</div>
                        <input type="text" id="aiSearchInput" placeholder="Ask AI: 'Find students interested in national security' or 'Who has experience at startups?'" class="ai-search-input">
                        <select id="modelSelect" class="model-select">
                            <option value="gemini-3-flash">Gemini 3 Flash (Recommended)</option>
                            <option value="gemini-3-pro">Gemini 3 Pro (Best Multimodal)</option>
                            <option value="claude-sonnet">Claude Sonnet (Best Reasoning)</option>
                            <option value="gemini-pro">Gemini 1.5 Pro</option>
                            <option value="gemini-flash">Gemini 1.5 Flash</option>
                        </select>
                        <button id="aiSearchBtn" class="btn btn-primary">Search</button>
                        <button id="clearSearchBtn" class="btn btn-secondary" style="display: none;">Clear Results</button>
                    </div>
                    <div class="model-info">
                        <div class="model-details" id="modelDetails">
                            <span class="model-detail-item"><strong>Quality:</strong> <span id="modelQuality">‚≠ê‚≠ê‚≠ê‚≠ê Very Good</span></span>
                            <span class="model-detail-item"><strong>Cost:</strong> <span id="modelCost">~$0.56 per 10 searches</span></span>
                            <span class="model-detail-item"><strong>Speed:</strong> <span id="modelSpeed">Medium (3-5s)</span></span>
                        </div>
                    </div>
                    <div id="aiSearchStatus" class="ai-search-status"></div>
                    <div id="aiSearchResults" class="ai-search-results"></div>
                </div>

                <div class="divider">
                    <span>or use traditional filters</span>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <input type="text" id="searchInput" placeholder="Search by name, company, school..." class="search-input">
                    </div>

                    <div class="filter-group">
                        <label for="schoolFilter">Filter by School:</label>
                        <select id="schoolFilter">
                            <option value="">All Schools</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="sortBy">Sort by:</label>
                        <select id="sortBy">
                            <option value="name">Name (A-Z)</option>
                            <option value="school">School</option>
                            <option value="recent">Recently Added</option>
                        </select>
                    </div>

                    <button id="clearFiltersBtn" class="btn btn-secondary">Clear Filters</button>
                </div>

                <div id="attendeesList" class="attendees-list">
                    <!-- Attendee cards will be dynamically inserted here -->
                </div>

                <div id="noResults" class="no-results" style="display: none;">
                    No attendees found matching your filters.
                </div>
            </div>
        </div>

        <!-- Import/Export Tab -->
        <div class="tab-content" id="import">
            <div class="import-export-panel">
                <h2>Settings & Data Management</h2>

                <div class="section">
                    <h3>AI Model Configuration</h3>
                    <p>Configure API keys for different AI models. Only add keys for models you plan to use.</p>
                    <p style="font-size: 0.875rem; color: #6E6E73; margin-top: 8px;">
                        All keys are stored locally in your browser and only sent to their respective AI providers.
                    </p>

                    <div style="background: #FFF9E6; padding: 16px; border-radius: 8px; margin-top: 16px; border-left: 4px solid #FFB800;">
                        <h4 style="font-size: 0.9375rem; margin-bottom: 8px; color: #1D1D1F;">üìä Cost Estimates</h4>
                        <p style="font-size: 0.8125rem; color: #6E6E73; line-height: 1.5;">
                            All pricing shown below is based on a database of <strong>1,300 profiles</strong> with each profile averaging <strong>300 tokens</strong> (~390,000 total tokens).<br>
                            If your database is larger or smaller, costs will scale proportionally for the first search. Subsequent cached searches remain the same price.
                        </p>
                    </div>

                    <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; margin-top: 16px;">
                        <h4 style="font-size: 0.9375rem; margin-bottom: 8px; color: #1D1D1F;">üí° How Caching Works</h4>
                        <p style="font-size: 0.8125rem; color: #6E6E73; line-height: 1.5;">
                            <strong>First search:</strong> Pays full cost to load your entire database into AI memory<br>
                            <strong>Next searches (within cache window):</strong> Database stays in memory, only your new query is processed<br>
                            <strong>After cache expires:</strong> Next search rebuilds cache at full cost<br>
                            <strong>Gemini's advantage:</strong> Cached database is 100% FREE (only query costs), making it cheapest for multiple searches
                        </p>
                    </div>

                    <!-- Google Gemini API Key (Default) -->
                    <div style="margin-top: 24px;">
                        <h4 style="font-size: 1rem; margin-bottom: 8px;">
                            <span style="background: linear-gradient(135deg, #4285F4, #34A853, #FBBC05, #EA4335); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 600;">Google Gemini</span>
                            <span style="background: #34A853; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; margin-left: 8px;">Recommended</span>
                        </h4>
                        <p style="font-size: 0.875rem; color: #6E6E73; margin-bottom: 12px;">
                            Get your API key from <a href="https://aistudio.google.com/apikey" target="_blank" style="color: #0071E3;">aistudio.google.com/apikey</a><br>
                            <strong>Gemini 3 Flash:</strong> First: $0.23, Then: $0.003 each | <strong>Gemini 3 Pro:</strong> First: $0.90, Then: $0.012 each<br>
                            <strong>Cache:</strong> 60min Pro / 5min Free (FREE!) | <strong>Quality:</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê to ‚≠ê‚≠ê‚≠ê‚≠ê Excellent
                        </p>
                        <div style="display: flex; gap: 12px;">
                            <input type="password" id="googleApiKeyInput" placeholder="AIza..." style="flex: 1;">
                            <button id="saveGoogleKeyBtn" class="btn btn-primary">Save Key</button>
                        </div>
                        <div id="googleApiKeyStatus" style="margin-top: 8px; font-size: 0.875rem;"></div>
                    </div>

                    <!-- Anthropic Claude API Key -->
                    <div style="margin-top: 24px;">
                        <h4 style="font-size: 1rem; margin-bottom: 8px;">
                            <span style="color: #D97757; font-weight: 600;">Anthropic Claude</span>
                            <span style="background: #D97757; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; margin-left: 8px;">Best Quality</span>
                        </h4>
                        <p style="font-size: 0.875rem; color: #6E6E73; margin-bottom: 12px;">
                            Get your API key from <a href="https://console.anthropic.com/" target="_blank" style="color: #0071E3;">console.anthropic.com</a><br>
                            <strong>Cost:</strong> First: $1.35, Then: $0.14 each | <strong>Cache:</strong> 5min (90% off) | <strong>Quality:</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent
                        </p>
                        <div style="display: flex; gap: 12px;">
                            <input type="password" id="anthropicApiKeyInput" placeholder="sk-ant-..." style="flex: 1;">
                            <button id="saveAnthropicKeyBtn" class="btn btn-primary">Save Key</button>
                        </div>
                        <div id="anthropicApiKeyStatus" style="margin-top: 8px; font-size: 0.875rem;"></div>
                    </div>
                </div>

                <div class="section">
                    <h3>Export Database</h3>
                    <p>Download all collected attendee data as JSON.</p>
                    <button id="exportBtn" class="btn btn-primary">Export to JSON</button>
                </div>

                <div class="section">
                    <h3>Import Database</h3>
                    <p>Upload a previously exported JSON file to restore data.</p>
                    <input type="file" id="importFile" accept=".json">
                    <button id="importBtn" class="btn btn-primary">Import from JSON</button>
                </div>

                <div class="section">
                    <h3>Clear Database</h3>
                    <p class="warning">Warning: This will delete all collected attendee data.</p>
                    <button id="clearDbBtn" class="btn btn-danger">Clear All Data</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js?v=58"></script>
</body>
</html>
